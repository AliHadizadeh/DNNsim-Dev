
syntax = "proto3";

package protobuf;

message Batch {

    message Transform {
        uint32 batch = 1;
        string inputType = 2; // Caffe/Protobuf/Gzip
        string inputDataType = 3;
        string outputType = 4; // Protobuf/Gzip
        string outputDataType = 5;
        string network = 6;
        bool bias_and_out_act = 7;
        bool tensorflow_8b = 8;
    }

    message Simulate {

        message Experiment {
            string architecture = 1;
            string task = 2;

            // For grid accelerators
            uint32 n_columns = 3;
            uint32 n_rows = 4;
            uint32 column_registers = 5;

            // For Dynamic Stripes
            uint32 precision_granularity = 6;
            bool leading_bit = 7;
            bool minor_bit = 8;

            // For pragmatic
            uint32 bits_first_stage = 9;

            // For stripes
            uint32 bits_pe = 10;

            // For tactical
            uint32 lookahead_h = 11;
            uint32 lookaside_d = 12;
            string search_shape = 13;
            bool read_schedule_from_proto = 14;

            // SCNN
            uint32 Wt = 15;
            uint32 Ht = 16;
            uint32 I = 17;
            uint32 F = 18;
            uint32 out_acc_size = 19;
            uint32 banks = 20;
            uint32 pe_serial_bits = 21;

            // BitFusion
            uint32 M = 22;
            uint32 N = 23;
            uint32 PMAX = 24;
            uint32 PMIN = 25;

            // On top architectures
            bool diffy = 26;

            bool dynamic_weights = 27;
        }

        uint32 batch = 1;
        uint32 epochs = 2;
        string inputType = 3;
        string inputDataType = 4;
        string network = 5;
        uint32 network_bits = 6;
        bool bias_and_out_act = 7;
        bool tensorflow_8b = 8;
		bool training = 9;
		bool only_forward = 10;
		bool only_backward = 11;
        uint32 decoder_states = 12;
        repeated Experiment experiment = 13;
    }

    repeated Transform transform = 1;
    repeated Simulate simulate = 2;

}
